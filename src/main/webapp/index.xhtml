<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:c="jakarta.tags.core">


    <h:head>
        <meta charset="utf-8" />
        <title>Księgarnia</title>
        <h:outputStylesheet>
            /* Globalny styl */
            body {
            background-color: #f4f4f9;
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            }

            h1 {
            font-family: 'Georgia', serif; /* Elegancka czcionka */
            font-size: 3em; /* Większy rozmiar czcionki */
            font-weight: bold; /* Pogrubienie tekstu */
            color: #ff5733; /* Ciepły kolor tekstu */
            text-align: center; /* Wyśrodkowanie tekstu */
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2); /* Delikatny cień tekstu */
            letter-spacing: 2px; /* Większe odstępy między literami */
            margin-top: 30px; /* Większa odległość od góry */
            text-transform: uppercase; /* Wszystkie litery duże */
            background: linear-gradient(45deg, #ff5733, #ff9b6f); /* Gradientowy kolor */
            -webkit-background-clip: text; /* Tylko tekst ma gradient */
            color: transparent; /* Kolor tekstu jest przezroczysty, gradient pokrywa tylko tekst */
            }

            /* Styl dla panelu wyszukiwania */
            .p-panel {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 2em;
            background: white;
            }

            .p-panel-header {
            font-size: 1.2em;
            background-color: #ff5733;
            color: white;
            padding: 10px;
            }

            /* Styl dla siatki książek */
            .book-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3 kolumny */
            gap: 20px;
            margin: 0 auto;
            max-width: 1200px;
            padding: 0 10px;
            }

            /* Karta książki */
            .book-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            }

            .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0px 6px 18px rgba(0, 0, 0, 0.2);
            }

            .book-image {
            width: 100%;
            height: 300px;
            object-fit: contain; /* Obrazek w pełni widoczny, bez przycinania */
            border-radius: 8px;
            margin-bottom: 10px;
            }

            .book-title {
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px 0;
            color: #333;
            }

            .book-price {
            font-size: 1.1em;
            color: #ff5733;
            margin-bottom: 10px;
            }

            .book-details {
            font-size: 0.9em;
            color: #777;
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            }

            .details-link {
            display: inline-block;
            padding: 8px 15px;
            background-color: #ff5733;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
            }

            .details-link:hover {
            background-color: #cc4628;
            }

            /* Styl dla formularza wyszukiwania */
            .search-form {
            max-width: 500px;
            margin: 0 auto;
            }

            .search-form p {
            text-align: center;
            margin-bottom: 1em;
            font-size: 1.1em;
            }

            .search-form .ui-inputtext {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            }

            .search-form .ui-commandbutton {
            width: 100%;
            background-color: #ff5733;
            color: white;
            border-radius: 5px;
            padding: 10px;
            transition: background-color 0.3s;
            }

            .search-form .ui-commandbutton:hover {
            background-color: #cc4628;
            }

            /* Responsywność */
            @media (max-width: 1024px) {
            .book-grid {
            grid-template-columns: repeat(2, 1fr); /* 2 kolumny dla tabletów */
            }

            h1 {
            font-size: 2.5em; /* Mniejszy napis na tabletach */
            }
            }

            @media (max-width: 768px) {
            .book-grid {
            grid-template-columns: 1fr; /* 1 kolumna dla telefonów */
            }

            h1 {
            font-size: 2em; /* Mniejszy napis na telefonach */
            }

            .container {
            background-color: #fff;
            border-radius: 8px;
            padding: 30px;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
            .search-form {
            max-width: 100%; /* Formularz wyszukiwania zajmuje całą szerokość na telefonach */
            }
            }
        </h:outputStylesheet>

    </h:head>

    <h:body>
        <!-- menubar -->
        <div class="card" >
            <h:form>
                <p:growl id="messages"/>

                <p:menubar hideDelay="1000">
                    <f:facet name="start">
                        <p:graphicImage name="logo.jpg" library="images"  />
                    </f:facet>

                    <p:divider layout="vertical"/>

                    <p:menuitem value="koszyk"  action="#{ksiazkiListBB.showBusket}" icon="pi pi-shopping-bag">

                    </p:menuitem>

                    <p:submenu label="koszyk" icon="pi pi-shopping-bag">
                        <p:divider />
                        <p:menuitem value="#{ksiazkiListBB.busket}" icon="pi pi-fw pi-bookmark"/>

                    </p:submenu>

                    <p:divider layout="vertical"/>
                    <p:menuitem value="biblioteczka" icon="pi pi-book"  action="#{zamowieniaPage.OrdersPage}" />
                    <p:divider layout="vertical"/>



                    <p:menuitem value="#{userData.loggedInUser.imie} #{userData.loggedInUser.nazwisko}" icon="pi pi-fw pi-user" action="#{userData.userPage}" />

                    <p:submenu label="Role" icon="pi pi-shopping-bag">
                        <c:forEach items="#{userData.userRoles}" var="role">
                            <p:menuitem value="#{role.rolaidRola.nazwaRoli}" icon="pi pi-fw pi-user" />
                        </c:forEach>

                    </p:submenu>
                    <p:divider layout="vertical"/>




                    <!-- Panel wyszukiwania -->
                    <f:facet name="end">
                        <div class="ui-input-icon-left mr-2">
                            <i class="pi pi-fw pi-search" />

                            <p:inputText placeholder="Search" value="#{ksiazkiListBB.tytul}">
                                <p:ajax event="keyup" listener="#{ksiazkiListBB.getList}" update="booksTable" />
                            </p:inputText>

                        </div>
                        <p:commandButton value="Logout" action="#{logInOutBB.logout}" icon="pi pi-fw pi-sign-out" styleClass="ui-button-info"/>
                    </f:facet>
                </p:menubar>
            </h:form>
        </div>


        <!-- Komunikaty -->
        <p:messages />



        <h:form id="koszykForm">
            <h:panelGroup id="koszykPanel">
                <h3>Twój koszyk</h3>
                <ui:repeat value="#{ksiazkiListBB.busket}" var="ksiazka">
                    <p>
                        <h:outputText value="#{ksiazka.tytul} - #{ksiazka.cena} PLN" />
                        <p:commandButton value="Usuń" action="#{ksiazkiListBB.usunBusket(ksiazka)}" update="koszykForm:koszykPanel" />
                    </p>
                </ui:repeat>
                <p:commandButton value="Wyczyść koszyk" action="#{ksiazkiListBB.wyczyscBusket()}" update="koszykForm:koszykPanel" />
            </h:panelGroup>
        </h:form>




        <!-- Książki -->
        <h:form id="booksTable">
            <p:growl id="msgs" showDetail="true"/>
            <div class="book-grid">
                <ui:repeat value="#{ksiazkiListBB.list}" var="k">
                    <div class="book-card">
                        <h:graphicImage value="/resources/#{k.imgUrl}" styleClass="book-image" />
                        <div class="book-title">
                            <h:outputText value="#{k.tytul}" />
                        </div>
                        <div class="book-price">
                            <h:outputText value="#{k.cena} PLN" />
                        </div>
                        <div class="book-details">
                            <ui:repeat var="a" value="#{ksiazkiHasAutorKsiazkiBB.list}">
                                <h:panelGroup rendered="#{k.idKsiazki eq a.ksiazkiidKsiazki.idKsiazki}">
                                    <span><b>Autor:</b> #{a.autorKsiazkiidAutorKsiazki.imie} #{a.autorKsiazkiidAutorKsiazki.nazwisko}</span>
                                </h:panelGroup>
                            </ui:repeat>
                            <span><b>Ilość sztuk:</b> #{k.iloscsztuk}</span>
                        </div>
                        <p:commandButton value="Zobacz"     styleClass="details-link" action="#{ksiazkiListBB.showBook(k)}"   ajax="false" />
                        <p:commandButton value="Dodaj do koszyka" 
                                         styleClass="details-link"  
                                         action="#{ksiazkiListBB.addToBusket(k)}"  
                                         update=":koszykForm:koszykPanel" />

                    </div>
                </ui:repeat>
            </div>
            <p:commandButton value="Poprzednia" action="#{ksiazkiListBB.prevPage}" ajax="true" update="booksTable" />
            <p:commandButton value="Następna" action="#{ksiazkiListBB.nextPage}" ajax="true" update="booksTable" />
        </h:form>






    </h:body>
</html>
